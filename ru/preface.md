# Предисловие

Объектная система Common Lisp (CLOS) включает в себя набор инструментов для разработки объектно-ориентированных программ на Common Lisp. Объектно-ориентированная программа обычно разрабатывается и строится по модульному принципу. Объектно-ориентированный стиль программирования делает его практичным для организации больших программ; он помогает вам разбивать сложные задачи на функциональные модули.

CLOS был принят как часть Common Lisp комитетом X3J13, который работает над созданием стандарта ANSI Common Lisp. Эта книга соответствует июньской версии 1988 года "Спецификации объектной системы Common Lisp" и не отражает никаких изменений спецификации, сделанных после этой даты.

### Дорожная карта этого руководства для программистов

Эта книга предназначена для пользователей CLOS. Поскольку CLOS - это набор инструментов для разработки программного обеспечения, основанный на Common Lisp, его пользователями являются разработчики программного обеспечения, знакомые с Common Lisp. Люди, которые писали программы на Лиспе среднего размера, должны быть в состоянии понять весь код в примерах в этой книге.

С другой стороны, в этой книге излагаются объектно-ориентированные методы проектирования и разработки программного обеспечения; эти методы могут представлять интерес для людей, не входящих в сообщество Common Lisp, которые хотят применить эти идеи к другим языкам программирования. Люди, незнакомые с Lisp, должны быть в состоянии понять основные идеи этой книги, но не должны ожидать, что поймут весь код Lisp в примерах.

Цель этой книги - помочь вам наилучшим образом воспользоваться возможностями, которые предлагает CLOS. Используйте его в качестве практического руководства, чтобы как можно быстрее приступить к написанию объектно-ориентированных программ.

    **Эта книга представляет собой:** 	 Учебное пособие
    		       		  Руководство пользователя 
    		       		  Руководство для программиста 
    **Эта книга не является:**             	 Спецификацией языка
    		       		  Руководством для разработчика 
    		       		  Теоретическим дискурсом 


Стиль этой книги подобен спирали. Он начинается с описания основных концепций CLOS и основных методов, которые необходимы для написания программ CLOS. Как только вы поймете, как элементы CLOS работают вместе, вы сможете писать объектно-ориентированные программы, используя всего несколько макросов и функций.

Затем спираль раскручивается, добавляя методы и функции к центральной модели. Некоторые из них сразу же покажутся вам полезными для конкретного приложения; другие вы, вероятно, пометите как "что-то, что нужно запомнить на будущее". Редким будет приложение, для которого требуются все функции, предлагаемые CLOS.

Эта книга полностью основана на примерах программирования, демонстрирующих мощь CLOS. Мы знакомим с основными концепциями CLOS, шаг за шагом проходя через разработку простой объектно-ориентированной программы, которая реализует блокировки для управления параллелизмом. Мы демонстрируем дополнительные методы, показывая другие примеры программ, включая программу удаленной оценки(вычисления) и программу установки программного обеспечения. Наконец, мы представляем расширенный пример, который показывает, как потоки Common Lisp могут быть реализованы с использованием CLOS.

Эти примеры иллюстрируют модульность и хорошие принципы проектирования, а также большинство функций CLOS.

Несколько примеров можно ввести в реализацию CLOS и выполнить. Однако вы не можете выполнить более длинные примеры (блокировка, удаленная оценка и потоки), не выполнив некоторой дополнительной работы. Пример блокировки предполагает среду, в которой существует несколько процессов, которые могут претендовать на ресурс в любой момент времени.

Удаленная оценка(вычисление) зависит от модели, в которой два компьютера соединены сетью. Потоки должны получать доступ к устройствам, таким как диски, с помощью специфичных для устройства примитивов. Common Lisp не включает в свое определение процессы, сети или специфичные для устройства примитивы, хотя любая реализация Common Lisp может свободно реализовывать такие примитивы. Первоначально нашей целью было определить примеры, в которых использовались только переносимые функции Common Lisp, но эта цель вступила в противоречие с более важной: продемонстрировать, как решать большие реальные проблемы с помощью объектно-ориентированного программирования. Таким образом, мы выбрали более сложные примеры, а не более мелкие примеры, которые работали бы в любой реализации Common Lisp. Когда мы используем функции, которые не являются частью Common Lisp, мы точно документируем, что делают эти функции. Вы можете определить эти функции самостоятельно, если хотите выполнить примеры, что мы и сделали при их тестировании.

Попутно в книге информация представлена в виде резюме; поскольку резюме повторяют информацию, приведенную в других местах книги, вы можете пропустить их во время первого чтения и использовать для справок позже.

### Об этой книге

Я написал эту книгу, используя **Concordia**, рабочий инструмент Symbolics для писателей. Concordia взяла на себя бремя многих механических задач, связанных с написанием и переработкой, и позволила мне сосредоточиться на содержании и организации книги.

**Concordia** сама по себе является объектно-ориентированной программой. (В настоящее время она написана в новых вариантах, но может быть преобразована в CLOS.) Автор создает документ как набор "записей", объектов, которые могут включать заголовок, простое текстовое содержимое, "общие инструкции по разметке", графические изображения, команды индексации, перекрестные ссылки на другие записи и другие атрибуты. Документ в целом определяется одной записью верхнего уровня, которая включает ссылки на все записи, которые будут рассматриваться как главы. Каждая запись главы содержит ссылки на записи, которые будут рассматриваться как ее разделы, и так далее. Автор может реорганизовать любую часть книги, просто добавив, удалив или изменив порядок ссылок на другие записи. Когда разные документы охватывают один и тот же материал, нет необходимости копировать текст: автор может включить ссылки из нескольких документов на единственную запись, содержащую материал. Такой гибкий обмен записями сводит к минимуму необходимость поддерживать повторяющиеся версии текста.

Записи хранятся в базе данных документации, доступ к которой можно получить в гипертекстовом режиме с помощью другого инструмента, называемого Document Examiner. Читатели могут изучить любую интересующую тему с помощью этого инструмента, указав слова, которые служат ключевыми словами для поиска Document Examiner в базе данных документации. Хотя к каждой записи можно получить доступ по отдельности, организация документа не теряется для онлайн-читателей; они могут просматривать взаимосвязи между записями, чтобы увидеть, как устроен документ в целом.

**Concordia** поддерживает этап оформления книги с помощью инструмента предварительного просмотра страниц, который показывает страницы на экране в том формате, в каком они были бы на бумаге, что позволяет легко экспериментировать с различными дизайнами. Дизайнер книги управляет внешним видом книги, давая инструкции о том, как следует обращаться с общей разметкой в онлайн-рукописи.Общая инструкция разметки включает в себя такие простые директивы, как "эти строки должны отображаться в детализированном списке" или "это рисунок". Конструктор книг определяет, как детализированные списки отображаются на бумаге, а также определяет такие переменные, как шрифты и поля для текста, стиль рисунков и таблиц, внешний вид заголовков глав и формат указателя. Заключительный шаг - перенести онлайн-рукопись на бумагу, в результате чего получится готовая к работе копия.

Таким образом, **Concordia ** предлагает три интерфейса для работы с записями: один для автора, другой для читателей и еще один для дизайнера книг и продюсера. Объектно-ориентированный дизайн программы позволяет удобно использовать один набор объектов (записей документации) по-разному для разных целей. Объекты свободно распределяются между тремя инструментами.

**Concordia** - это один из реальных примеров программы, которая хорошо использует объектно-ориентированный стиль и предлагает своим пользователям неоценимую услугу. Я благодарен Рику Брайану, Деннису Даути и Джанет Уокер за изобретение этой замечательной программы, а также Келли Брэдфорд, В. Эллен Голден, Бобу Мэтьюзу, Марку Видзински и Биллу Йорку за их вклад в развитие и совершенствование Concordia. Графический редактор Symbolics - это смежный инструмент (тоже объектно-ориентированный, конечно), и я благодарен Майку Макмахону за то, что он позволил так легко рисовать картинки и интегрировать их в эту книгу.